<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default_layout}">
<head>
    <title>차량 대여</title>
</head>
<!-- Content -->
<main layout:fragment="content" class="container mt-4">
    <h1 class="display-5">차량 대여하기</h1>
    <!-- 여기에 carList 리스트 값을 리스트 형식으로 보여줌 -->
    <!-- 검색 창 -->
    <div class="container mt-3">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <form class="d-flex" action="" method="get">
                    <input class="form-control me-2" type="search" th:placeholder="${search}" aria-label="Search" name="q">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                </form>
            </div>
        </div>
    </div>
    <!-- 카 테이블 프래그먼트 -->
    <div th:replace="~{fragments/carTable :: commonTable(${carListTitles}, ${carList}, 'rental')}"></div>
    <!-- The Modal -->
<!--    <div class="modal fade" th:each="car : ${carList}" th:id="'rentCarModal-' + ${car.getNumber()}" tabindex="-1" role="dialog" aria-labelledby="rentCarModalLabel" aria-hidden="true">-->
<!--        <div class="modal-dialog" role="document">-->
<!--            <div class="modal-content">-->
<!--                <div class="modal-header">-->
<!--                    <h5 class="modal-title" id="rentCarModalLabel">Rent Car</h5>-->
<!--                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--                        <span aria-hidden="true">&times;</span>-->
<!--                    </button>-->
<!--                </div>-->
<!--                <div class="modal-body">-->
<!--                    <form th:id="'rentCarForm-' + ${car.getNumber()}" th:action="@{/car/rental}" method="post">-->
<!--                        <input type="hidden" th:name="'carId'" th:value="${car.getId()}"/>-->
<!--                        <div th:if="${rentalListMap[car.getNumber()] != null}">-->
<!--                            <label>예약 현황</label>-->
<!--                            <ul>-->
<!--                                <li th:each="rental : ${rentalListMap[car.getNumber()]}">-->
<!--                                    &lt;!&ndash; 여기에 각 rental 항목을 표시하는 방법을 정의 &ndash;&gt;-->
<!--                                    <span th:text="${rental.getUser().getUsername()}"></span>-->
<!--                                    <span>대여일:</span>-->
<!--                                    <span th:text="${rental.getPickupDate()}"></span>-->
<!--                                    <span>반납일:</span>-->
<!--                                    <span th:text="${rental.getReturnDate()}"></span>-->
<!--                                </li>-->
<!--                            </ul>-->
<!--                        </div>-->
<!--                        <div class="form-group">-->
<!--                            <label for="pickupDate">Pick-up Date:</label>-->
<!--                            <input type="date" class="form-control" th:min="${minDay}" th:max="${maxDay}" id="pickupDate" name="pickupDate" required>-->
<!--                        </div>-->
<!--                        <div class="form-group">-->
<!--                            <label for="returnDate">Return Date:</label>-->
<!--                            <input type="date" class="form-control" th:min="${minDay}" th:max="${returnDay}" id="returnDate" name="returnDate" required>-->
<!--                        </div>-->
<!--                        <input type="submit" class="btn btn-primary" value="대여 신청">-->
<!--                    </form>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

    <script>
        // document.querySelectorAll("[id^='rentCarForm-']").forEach((element) =>
        //     element.addEventListener('submit', function(event) {
        //         event.preventDefault(); // 폼의 기본 제출 동작을 방지
        //
        //         const formData = new FormData(this);
        //
        //         fetch(this.action, {
        //             method: this.method,
        //             body: formData
        //         })
        //         .then(response => response.json())
        //         .then(data => {
        //             alert(data.message); // 서버 응답 메시지를 알림으로 표시
        //         })
        //         .catch(error => {
        //             console.error('Error:', error);
        //             alert('An error occurred'); // 오류 발생 시 알림
        //         })
        //         .finally(() => {
        //             location.reload(); // 페이지 새로고침
        //         });
        //     })
        // );
    </script>
</main>
</html>